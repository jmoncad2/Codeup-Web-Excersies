<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Exercise</title>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->
    <style>
        body {
            background: #86BA90;
            color: #DF2935;
            font-size: 1.2em;
            font-family: sans-serif;
        }

        #map-canvas {
            width: 1000px;
            height: 460px;
            margin-left: 130px;
            margin-top: 10px;
            border-radius: 8px;

        }

        .castBoxes {
            width: 300px;
            height: 150px;
            border-radius: 8px;
            background: #F5F3BB;
            display: inline-block;
            text-align: center;
            vertical-align: middle;
        }

        #castWrapper {
            margin-left: 175px;
        }

        #searchBox {
            width: 250px;
            height: 30px;
            position: absolute;
            margin-left: 800px;
            border-radius: 8px;
            font-size: 1.5em;
        }

        #searchBtn {
            height: 30px;
            margin-top: 5px;
            margin-left: 1058px;
            position: absolute;
            border-radius: 8px;
        }

        #cityName {
            font-size: 35px;
            margin-left: 175px;
            margin-top: 0;
            margin-bottom: 0;
        }

        #webName {
            text-align: center;
            font-size: 55px;
        }

    </style>
</head>
<body>
<div id="webName">Weather Application</div>
<input id="searchBox" type="text">
<button id="searchBtn">Search</button>
<div id="cityName"></div>
<div id="castWrapper">
    <div id="castBox1" class="castBoxes"></div>
    <div id="castBox2" class="castBoxes"></div>
    <div id="castBox3" class="castBoxes"></div>
</div>

<div id="map-canvas"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDG6cL9lcy5RkzE8vWSWp00WGpJPvCJ66g"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
$(document).ready(function () {
    "use strict";
//======= Google Map =============================================================================================
    var map;
    var latLong = {lat: 29.4241, lng: -98.4936};

    var mapOptions = {
        zoom: 10,
        center: latLong
    };


    map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

    var marker = new google.maps.Marker({
        position: latLong,
        draggable: true,
        map: map
    });
//======= End of Map ============================================================================================

    function infoData(lat, long, zip) {

        $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
            APPID: "9d33eb0ddfaf3f69fcfe9737400c7e05",
            lat: lat,
            lon: long,
            units: "imperial"
        }).done(function (data) {
            displayData(data);
            dataBox1(data);
            dataBox2(data);
            dataBox3(data);
            console.log(data);
        });
    }

    google.maps.event.addListener(marker, "dragend", function () {
        var lat = this.getPosition().lat();
        var lng = this.getPosition().lng();
        map.setCenter({lat: lat, lng: lng});
        infoData(lat, lng);
    });

    function displayData(data) {
        var cityContent = "";
        var countryContent = "";
        countryContent = data.city.country;
        cityContent = data.city.name;
        $("#cityName").html(cityContent + ", " + countryContent);
    }
//============ 3 Day Forecast Boxes ==============================================================================
    function dataBox1(dataBox1) {
        var box1MaxTemp = "";
        var box1MinTemp = "";
        var box1Img = "";
        var box1Forecast = "";
        var box1AvgTemp = "";
        var box1Humidity = "";
        box1MaxTemp = dataBox1.list[0].temp.max;
        box1MinTemp = dataBox1.list[0].temp.min;
        box1Img = dataBox1.list[0].weather[0].icon;
        box1Forecast = dataBox1.list[0].weather[0].description;
        box1AvgTemp = dataBox1.list[0].temp.day;
        box1Humidity = dataBox1.list[0].humidity;
        $("#castBox1").html("<strong>" + box1MaxTemp + "/" + box1MinTemp + "</strong>" + "<br>" +
                            "<img src='http://openweathermap.org/img/w/" + box1Img + ".png'>"
                            + "<br>" +
                            "Forecast: " + box1Forecast + "<br>" +
                            "Current Temp: " + box1AvgTemp + "<br>" +
                            "Humidity: " + box1Humidity);
    }

    function dataBox2(dataBox2) {
        var box2MaxTemp = "";
        var box2MinTemp = "";
        var box2Img = "";
        var box2Forecast = "";
        var box2AvgTemp = "";
        var box2Humidity = "";
        box2MaxTemp = dataBox2.list[1].temp.max;
        box2MinTemp = dataBox2.list[1].temp.min;
        box2Img = dataBox2.list[1].weather[0].icon;
        box2Forecast = dataBox2.list[1].weather[0].description;
        box2AvgTemp = dataBox2.list[1].temp.day;
        box2Humidity = dataBox2.list[1].humidity;
        $("#castBox2").html("<strong>" + box2MaxTemp + "/" + box2MinTemp + "</strong>" + "<br>" +
                            "<img src='http://openweathermap.org/img/w/" + box2Img + ".png'>"
                            + "<br>" +
                            "Forecast: " + box2Forecast + "<br>" +
                            "Current Temp: " + box2AvgTemp + "<br>" +
                            "Humidity: " + box2Humidity);
    }

    function dataBox3(dataBox3) {
        var box3MaxTemp = "";
        var box3MinTemp = "";
        var box3Img = "";
        var box3Forecast = "";
        var box3AvgTemp = "";
        var box3Humidity = "";
        box3MaxTemp = dataBox3.list[2].temp.max;
        box3MinTemp = dataBox3.list[2].temp.min;
        box3Img = dataBox3.list[2].weather[0].icon;
        box3Forecast = dataBox3.list[2].weather[0].description;
        box3AvgTemp = dataBox3.list[2].temp.day;
        box3Humidity = dataBox3.list[2].humidity;
        $("#castBox3").html("<strong>" + box3MaxTemp + "/" + box3MinTemp + "</strong>" + "<br>" +
                            "<img src='http://openweathermap.org/img/w/" + box3Img + ".png'>"
                            + "<br>" +
                            "Forecast: " + box3Forecast + "<br>" +
                            "Current Temp: " + box3AvgTemp + "<br>" +
                            "Humidity: " + box3Humidity);
    }
//============= End of Boxes =====================================================================================



});





</script>
</body>
</html>